services:
  redis:
    image: redis:7-alpine
    container_name: hardwork_redis
    restart: always
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  nginx:
    image: nginx:latest
    container_name: hardwork_nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    # Nginx тепер залежить лише від Redis (хоча це не сувора вимога,
    # але ми залишили depends_on, щоб Redis стартував першим)
    depends_on:
      - redis

volumes:
  # Ми видалили postgres_data, оскільки він більше не потрібен
  redis_data: